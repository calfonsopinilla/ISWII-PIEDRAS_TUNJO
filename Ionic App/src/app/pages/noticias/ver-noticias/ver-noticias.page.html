

  <app-header titulo="Ver Noticia" tipo="back"></app-header>
  <ion-content [fullscreen] class="ion-padding">
    
    <ion-card *ngIf="noticia">
      <div style="text-align: center ; font-size:20px; font-weight: bold; color: blue; "> {{noticia.titulo}}</div><br>
      <div style="text-align: right;">Fecha : {{ noticia.fechaPublicacion | date:"dd-MM-yyyy" }} </div> 
        <br>
        <ion-slides [options]="{}" pager="true" *ngIf="noticia.listaImagenes">
          <ion-slide *ngFor="let image of noticia.listaImagenes" class="image-slide"
                      [style]="(image | imgServer: 'noticia') | domSanitizer" ></ion-slide>
        </ion-slides>    
        <div style="font-size: 15px;"><br>
          {{noticia.descripcion}}
      </div>
  </ion-card>




<ion-list>
  <ion-list-header>
      Reseñas
  </ion-list-header>

  <div *ngIf="estado == false"> <!-- Crear Comentario -->
    <div class="comentario_usuario_cntr" *ngIf="usuario">
      <ion-avatar slot="start">
        <img src="http://piedrasdeltunjo.tk/images/getImage?tipo=avatar&nombre={{ usuario.Icono_url }}">
      </ion-avatar>
      <ion-label>
        <h2>{{ usuario.Nombre }} {{ usuario.Apellido }}</h2>      
        <form [formGroup]="formUser" (ngSubmit)="crearComentario()" *ngIf="formUser">
          <h5>
            Mi calificación:           
          </h5>
          <rating formControlName="Calificacion" readonly="false" size="small"></rating>
          <h5>Mi comentario:</h5>
          <ion-textarea color="dark" formControlName="Descripcion"></ion-textarea>
          <ion-button id="button-submit" type="submit">Comentar</ion-button>
        </form>      
      </ion-label>      
    </div>
  </div>

  <div *ngIf="estado == true"> <!-- Actualizar Comentario -->
    <div class="comentario_usuario_cntr" *ngIf="comentarioUsuario">
      <ion-avatar slot="start">
        <img src="http://piedrasdeltunjo.tk/images/getImage?tipo=avatar&nombre={{ comentarioUsuario.usuario.Icono_url }}">
      </ion-avatar>
      <ion-label>
        <h2>{{ comentarioUsuario.usuario.Nombre }} {{ comentarioUsuario.usuario.Apellido }}</h2>              
        <p>{{ comentarioUsuario.fechaPublicacion | date: 'MMM d, y'  }}</p>
        <form [formGroup]="formUser" (ngSubmit)="actualizarComentario()" *ngIf="formUser">        
          <h5>
            Mi calificación: 
            <span style="font-weight: normal;">{{ comentarioUsuario.calificacion }}/5</span>
          </h5>
          <rating formControlName="Calificacion" readonly="false" size="small"></rating>
          <h5>Mi comentario:</h5>
          <ion-textarea color="dark" formControlName="Descripcion" value="{{ comentarioUsuario.descripcion }}"></ion-textarea>
          <ion-button id="button-submit" type="submit">Actualizar</ion-button>
        </form>              
      </ion-label>        
    </div>  
  </div>    

  <ion-item *ngFor="let comentario of listaComentariosNoticias">
      <ion-avatar slot="start">
          <img src="http://piedrasdeltunjo.tk/images/getImage?tipo=avatar&nombre={{ comentario.usuario.Icono_url }}">
      </ion-avatar>
      <ion-label>
        <ion-button style="float: right;" (click)="reportarComentario(comentario)">
          <ion-icon name="skull"></ion-icon>
        </ion-button>
        <h2 style="font-weight: bold;">{{ comentario.usuario.Nombre }} {{ comentario.usuario.Apellido }}</h2>                
        <p>
          <img src="../../../../assets/img/{{ comentario.calificacion }}-star.png" width="26%" style="margin-right: 6px;">
          {{ comentario.fechaPublicacion | date: 'MMM d, y'   }}
        </p>
        <p>{{ comentario.descripcion }}</p>
      </ion-label>
  </ion-item>
</ion-list>
</ion-content>
  