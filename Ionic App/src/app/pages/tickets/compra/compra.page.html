<app-header titulo="Compra de tickets" tipo="menu"></app-header>

<ion-content [fullscreen] class="ion-padding">
  <form #formReserva="ngForm" (ngSubmit)="onSubmit(formReserva)">
    <ion-list class="margin-top">
      <ion-list-header>
        <ion-label><strong>Nueva reserva</strong></ion-label>
      </ion-list-header>
      <div style="text-align: center;"> Elije un ticket</div>
      <ion-item>
        <ion-label>Tickets </ion-label>

        <ion-select name="value"   [(ngModel)]="reserva.value" interface="action-sheet"  (ionChange)="onSelectChange()" cancelText="Cancelar">

          <div *ngIf="validarResidencia">
            <ion-select-option value="1">Entrada Residente </ion-select-option>
          </div>
          <ion-select-option value="2">Entrada Visitante</ion-select-option>
          <div *ngIf="validarEdad">
            <ion-select-option value="3">Entrada gratuita</ion-select-option>
          </div>
        </ion-select>
      </ion-item>
      
  
      <ion-row *ngIf="validar">
        <ion-col size="4">
          <ion-label style="text-align: center;">AÃ±o</ion-label>
          <ion-select id="year" *ngIf="yearValues"
                      [value]="yearValues[0]"
                      [disabled]="yearValues.length === 1" 
                      placeholder="Select"
                      okText="Aceptar"
                      >
            <ion-select-option *ngFor="let year of yearValues" [value]="year">{{ year }}</ion-select-option>
          </ion-select>
        </ion-col>
        <ion-col size="4">
          <ion-label>Mes</ion-label>
          <ion-select id="month" *ngIf="monthValues"
                      [value]="monthValues[0]"
                      (ionChange)="monthChange($event)"
                      [disabled]="monthValues.length === 1" 
                      placeholder="Select"
                      okText="Aceptar">
            <ion-select-option *ngFor="let month of monthValues;" [value]="month">
                {{ nameMonths[convertNumber(month)-1] }} 
  
            </ion-select-option>
          </ion-select>
        </ion-col>
        <ion-col size="4">
          <ion-label>DÃ­a</ion-label>
          <ion-select id="day" *ngIf="dayValues"
                      [value]="dayValues[0]"
                      [disabled]="dayValues.length === 1"
                      placeholder="Select"
                      okText="Aceptar"
                      >
            <ion-select-option *ngFor="let day of dayValues" [value]="day">{{ day }}</ion-select-option>
          </ion-select>
        </ion-col>
      </ion-row>


      <ion-item *ngIf="(reserva.value=='1' && validar ) ">          
        <ion-label position="floating">Cantidad</ion-label>  
        <ion-input type="number" disabled ="true" name="cantidad" min="1" max="1" [(ngModel)]="reserva.cantidad"></ion-input>
      </ion-item>
    
      <ion-item *ngIf="(reserva.value=='2'  && validar )">          
        <ion-label position="floating">Cantidad</ion-label>  
        <ion-input (ionChange)="calcularPrecioTotal()" type="number" disabled ="false" name="cantidad" min="1" max="1" [(ngModel)]="reserva.cantidad"></ion-input>
      </ion-item>
    
      <ion-item *ngIf="(reserva.value=='3'  && validar )">        
        <ion-label position="floating">Cantidad</ion-label>  
        <ion-input type="number" disabled ="true" name="cantidad" min="1" max="1" [(ngModel)]="reserva.cantidad"></ion-input>
      </ion-item>
    
    <ion-item *ngIf="validar">
        <ion-label position="fixed">Precio </ion-label>
        <ion-label>$ {{ precioTicket }}</ion-label>
    </ion-item>
      <ion-button expand="full" shape="round" type="submit" 
                  [disabled]="!reservaValida" class="btn-form">Reservar</ion-button>
                            
    </ion-list>

  </form>



</ion-content>