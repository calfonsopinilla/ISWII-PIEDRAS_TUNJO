<app-header titulo="Compra ticket" tipo="menu"></app-header>

<ion-content [fullscreen] class="ion-padding" *ngIf="!excentoPago">
  <ion-list>
    <ion-list-header>
      <ion-label>El tipo de ticket es definido por tus datos de registro</ion-label>
    </ion-list-header>
    
    <ion-item *ngIf="ticketSelected" class="ion-margin-bottom">
      <ion-label>Tipo ticket</ion-label>
      <!-- <ion-select value="peperoni" multiple="true" placeholder="Select Pizza"> -->
      <ion-select [value]="idSelected">
        <ion-select-option *ngFor="let ticket of tickets" [disabled]="ticket.Id !== idSelected"
            [value]="ticket.Id">
          {{ ticket.Nombre }}
        </ion-select-option>
      </ion-select>
    </ion-item>
    <ion-chip color="primary">
      <ion-label>{{ ticketSelected.Descripcion }}</ion-label>
    </ion-chip>

    <ion-item class="ion-margin-top">
      <ion-label>Selecciona una fecha de reserva</ion-label>
    </ion-item>
    <ion-grid fixed>
      <ion-row>
        <ion-col size="4">
          <ion-label>Año</ion-label>
          <ion-select id="year" *ngIf="yearValues"
                      [value]="yearValues[0]"
                      [disabled]="yearValues.length === 1" 
                      placeholder="Select">
            <ion-select-option *ngFor="let year of yearValues" [value]="year">{{ year }}</ion-select-option>
          </ion-select>
        </ion-col>
        <ion-col size="4">
          <ion-label>Mes</ion-label>
          <ion-select id="month" *ngIf="monthValues"
                      [value]="monthValues[0]"
                      (ionChange)="monthChange($event)"
                      [disabled]="monthValues.length === 1" 
                      placeholder="Select">
            <ion-select-option *ngFor="let month of monthValues" [value]="month">
              {{ nameMonths[convertNumber(month)-1] }}
            </ion-select-option>
          </ion-select>
        </ion-col>
        <ion-col size="4">
          <ion-label>Día</ion-label>
          <ion-select id="day" *ngIf="dayValues"
                      [value]="dayValues[0]"
                      [disabled]="dayValues.length === 1"
                      placeholder="Select">
            <ion-select-option *ngFor="let day of dayValues" [value]="day">{{ day }}</ion-select-option>
          </ion-select>
        </ion-col>
      </ion-row>
    </ion-grid>

    <ion-item>
      <ion-label position="fixed">Precio ticket</ion-label>
      <ion-chip color="primary">
        <ion-label>
          {{ ticketSelected.Precio | currency: 'COP ' }}
        </ion-label>
      </ion-chip>
    </ion-item>
    
    <ion-item>
      <ion-label>Cantidad</ion-label>
      <ion-select id="month" [(ngModel)]="cantidad" placeholder="Select">
        <ion-select-option *ngFor="let num of array" [value]="num">{{ num }}</ion-select-option>
      </ion-select>
    </ion-item>

    <ion-card class="ion-margin-top">
      <ion-card-content>
        <ion-item *ngIf="promocion">
          <ion-label position="fixed">Subtotal:</ion-label>
          <ion-chip color="success">
            <ion-label>{{ getSubtotal | currency: 'COP ' }}</ion-label>
          </ion-chip>
        </ion-item>
        <ion-item *ngIf="promocion">
          <ion-label position="fixed">Promoción:</ion-label>
          <ion-chip color="warning">
            <ion-label>{{ promocion.PorcentajeDescuento }} % de descuento</ion-label>
          </ion-chip>
        </ion-item>
        <ion-item>
          <ion-label position="fixed">Total:</ion-label>
          <ion-chip color="success">
            <ion-label>{{ getTotal | currency: 'COP ' }}</ion-label>
          </ion-chip>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <ion-button expand="full" color="success" shape="round" id="btn-reservar" 
                (click)="reservar()">Comprar</ion-button>
  </ion-list>
</ion-content>

<ion-content *ngIf="excentoPago" color="dark">
  <ion-slides [options]="slidesOpts">
    <ion-slide>
      <ion-card>
        <ion-card-header>
          <ion-button expand="full" size="large" fill="outline" color="success">INGRESO GRATUITO</ion-button>
          <ion-card-subtitle>
            Para menores de 5 años y mayores de 65 años.
          </ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
          <img src="/assets/mock-images/gratis.png" alt="gratis">
          Puedes acceder al Parque Piedras del Tunjo de manera gratuita
        </ion-card-content>
      </ion-card>
    </ion-slide>
  </ion-slides>
</ion-content>